<!DOCTYPE html>
<html lang="zh-TW">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta
            name="google-site-verification"
            content="f9zVd6O3yQY_bfVrwDJRDh0ITJyaC1tYhV4CsYDnCv4"
        />
        <link
            rel="apple-touch-icon"
            sizes="180x180"
            href="images/apple-touch-icon.png"
        />
        <link
            rel="icon"
            type="image/png"
            sizes="32x32"
            href="images/favicon-32x32.png"
        />
        <link
            rel="icon"
            type="image/png"
            sizes="16x16"
            href="images/favicon-16x16.png"
        />
        <link rel="manifest" href="images/site.webmanifest" />
        <link rel="shortcut icon" href="images/favicon.ico" />
        <title>å­¸ç¿’å–®å­—ç”Ÿæˆå™¨</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            :root {
                --bg-gradient: linear-gradient(
                    135deg,
                    #667eea 0%,
                    #764ba2 100%
                );
                --card-bg: rgba(255, 255, 255, 0.95);
                --text-primary: #2d3748;
                --text-secondary: #4a5568;
                --border-color: #e2e8f0;
                --input-bg: #ffffff;
                --button-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                --button-hover: linear-gradient(
                    135deg,
                    #5a6fd8 0%,
                    #6b4190 100%
                );
                --success-color: #48bb78;
                --error-color: #f56565;
                --warning-color: #ecc94b;
                --shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
                    0 10px 10px -5px rgba(0, 0, 0, 0.04);
            }

            [data-theme='dark'] {
                --bg-gradient: linear-gradient(
                    135deg,
                    #1a202c 0%,
                    #2d3748 100%
                );
                --card-bg: rgba(45, 55, 72, 0.95);
                --text-primary: #f7fafc;
                --text-secondary: #cbd5e0;
                --border-color: #4a5568;
                --input-bg: #2d3748;
                --button-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                --button-hover: linear-gradient(
                    135deg,
                    #5a6fd8 0%,
                    #6b4190 100%
                );
                --success-color: #68d391;
                --error-color: #fc8181;
                --warning-color: #faf089;
                --shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3),
                    0 10px 10px -5px rgba(0, 0, 0, 0.2);
            }

            body {
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                background: var(--bg-gradient);
                min-height: 100vh;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 20px;
                transition: all 0.3s ease;
            }

            .container {
                background: var(--card-bg);
                backdrop-filter: blur(10px);
                border-radius: 20px;
                box-shadow: var(--shadow);
                padding: 40px;
                width: 100%;
                max-width: 500px;
                position: relative;
                overflow: hidden;
                transition: all 0.3s ease;
            }

            .container::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
                background: var(--button-bg);
            }

            .header {
                text-align: center;
                margin-bottom: 40px;
            }

            .header h1 {
                color: var(--text-primary);
                font-size: 2rem;
                font-weight: 700;
                margin-bottom: 10px;
                background: var(--button-bg);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            .header p {
                color: var(--text-secondary);
                font-size: 1rem;
                opacity: 0.8;
            }

            .theme-toggle {
                position: absolute;
                top: 20px;
                right: 20px;
                background: var(--input-bg);
                border: 1px solid var(--border-color);
                border-radius: 50%;
                width: 50px;
                height: 50px;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                transition: all 0.3s ease;
                font-size: 1.5rem;
            }

            .theme-toggle:hover {
                transform: scale(1.1);
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            }

            .form-group {
                margin-bottom: 30px;
            }

            .form-label {
                display: block;
                color: var(--text-primary);
                font-weight: 600;
                margin-bottom: 8px;
                font-size: 0.95rem;
            }

            .form-input,
            .form-textarea {
                width: 100%;
                padding: 16px 20px;
                border: 2px solid var(--border-color);
                border-radius: 12px;
                font-size: 1rem;
                background: var(--input-bg);
                color: var(--text-primary);
                transition: all 0.3s ease;
                resize: vertical;
            }

            .form-input:focus,
            .form-textarea:focus {
                outline: none;
                border-color: #667eea;
                box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
                transform: translateY(-2px);
            }

            .form-textarea {
                min-height: 120px;
                font-family: inherit;
            }

            .submit-button {
                width: 100%;
                padding: 16px;
                background: var(--button-bg);
                color: white;
                border: none;
                border-radius: 12px;
                font-size: 1.1rem;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                position: relative;
                overflow: hidden;
            }

            .submit-button:hover {
                background: var(--button-hover);
                transform: translateY(-2px);
                box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
            }

            .submit-button:active {
                transform: translateY(0);
            }

            .submit-button:disabled {
                opacity: 0.6;
                cursor: not-allowed;
                transform: none;
            }

            .loading-spinner {
                display: none;
                width: 20px;
                height: 20px;
                border: 2px solid transparent;
                border-top: 2px solid white;
                border-radius: 50%;
                animation: spin 1s linear infinite;
                margin-right: 10px;
            }

            @keyframes spin {
                0% {
                    transform: rotate(0deg);
                }
                100% {
                    transform: rotate(360deg);
                }
            }

            .progress-container {
                display: none;
                margin-top: 20px;
                padding: 20px;
                background: rgba(102, 126, 234, 0.1);
                border-radius: 12px;
                border: 1px solid rgba(102, 126, 234, 0.3);
            }

            .progress-bar {
                width: 100%;
                height: 8px;
                background: rgba(102, 126, 234, 0.2);
                border-radius: 4px;
                overflow: hidden;
                margin-bottom: 15px;
            }

            .progress-fill {
                height: 100%;
                background: linear-gradient(90deg, #667eea, #764ba2);
                border-radius: 4px;
                width: 0%;
                transition: width 0.3s ease;
                animation: shimmer 2s infinite;
            }

            @keyframes shimmer {
                0% {
                    background-position: -200px 0;
                }
                100% {
                    background-position: 200px 0;
                }
            }

            .progress-text {
                text-align: center;
                color: var(--text-primary);
                font-weight: 500;
                margin-bottom: 10px;
            }

            .progress-steps {
                display: flex;
                justify-content: space-between;
                margin-top: 15px;
            }

            .progress-step {
                display: flex;
                flex-direction: column;
                align-items: center;
                flex: 1;
                font-size: 0.8rem;
                color: var(--text-secondary);
            }

            .progress-step.active {
                color: #667eea;
                font-weight: 600;
            }

            .step-icon {
                width: 24px;
                height: 24px;
                border-radius: 50%;
                background: rgba(102, 126, 234, 0.2);
                display: flex;
                align-items: center;
                justify-content: center;
                margin-bottom: 5px;
                font-size: 0.7rem;
            }

            .progress-step.active .step-icon {
                background: #667eea;
                color: white;
            }

            .tips-container {
                margin-top: 15px;
                padding: 15px;
                background: rgba(72, 187, 120, 0.1);
                border-radius: 8px;
                border-left: 4px solid #48bb78;
            }

            .tips-title {
                font-weight: 600;
                color: var(--success-color);
                margin-bottom: 8px;
                display: flex;
                align-items: center;
            }

            .tips-content {
                color: var(--text-secondary);
                font-size: 0.9rem;
                line-height: 1.5;
            }

            .message {
                padding: 16px;
                border-radius: 12px;
                margin-top: 20px;
                font-weight: 500;
                display: none;
                animation: slideIn 0.3s ease;
            }

            .message.success {
                background: rgba(72, 187, 120, 0.1);
                color: var(--success-color);
                border: 1px solid rgba(72, 187, 120, 0.3);
            }

            .message.error {
                background: rgba(245, 101, 101, 0.1);
                color: var(--error-color);
                border: 1px solid rgba(245, 101, 101, 0.3);
            }

            .result-container {
                display: none;
                margin-top: 20px;
                padding: 20px;
                background: rgba(102, 126, 234, 0.1);
                border-radius: 12px;
                border: 1px solid rgba(102, 126, 234, 0.3);
            }

            .result-title {
                font-weight: 600;
                color: var(--text-primary);
                margin-bottom: 15px;
                display: flex;
                align-items: center;
                font-size: 1.1rem;
            }

            .result-content {
                color: var(--text-secondary);
                line-height: 1.6;
            }

            .new-request-button {
                padding: 10px 20px;
                background: var(--input-bg);
                color: var(--text-primary);
                border: 1px solid var(--border-color);
                border-radius: 8px;
                font-size: 0.9rem;
                cursor: pointer;
                transition: all 0.3s ease;
                margin-top: 15px;
            }

            .new-request-button:hover {
                background: var(--border-color);
            }

            @keyframes slideIn {
                from {
                    opacity: 0;
                    transform: translateY(-10px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            .floating-elements {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
                z-index: -1;
            }

            .floating-element {
                position: absolute;
                width: 8px;
                height: 8px;
                background: rgba(255, 255, 255, 0.1);
                border-radius: 50%;
                animation: float 6s ease-in-out infinite;
            }

            @keyframes float {
                0%,
                100% {
                    transform: translateY(0px) rotate(0deg);
                }
                50% {
                    transform: translateY(-20px) rotate(180deg);
                }
            }

            /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
            @media (max-width: 768px) {
                .container {
                    padding: 30px 20px;
                    margin: 10px;
                    border-radius: 16px;
                }

                .header h1 {
                    font-size: 1.75rem;
                }

                .theme-toggle {
                    width: 45px;
                    height: 45px;
                    font-size: 1.3rem;
                }

                .form-input,
                .form-textarea,
                .submit-button {
                    padding: 14px 16px;
                }

                .form-textarea {
                    min-height: 100px;
                }
            }

            @media (max-width: 480px) {
                body {
                    padding: 10px;
                }

                .container {
                    padding: 25px 15px;
                }

                .header h1 {
                    font-size: 1.5rem;
                }

                .header p {
                    font-size: 0.9rem;
                }
            }
        </style>
    </head>
    <body>
        <div class="floating-elements">
            <div
                class="floating-element"
                style="left: 10%; animation-delay: 0s"
            ></div>
            <div
                class="floating-element"
                style="left: 20%; animation-delay: 2s"
            ></div>
            <div
                class="floating-element"
                style="left: 30%; animation-delay: 4s"
            ></div>
            <div
                class="floating-element"
                style="left: 40%; animation-delay: 1s"
            ></div>
            <div
                class="floating-element"
                style="left: 50%; animation-delay: 3s"
            ></div>
            <div
                class="floating-element"
                style="left: 60%; animation-delay: 5s"
            ></div>
            <div
                class="floating-element"
                style="left: 70%; animation-delay: 2.5s"
            ></div>
            <div
                class="floating-element"
                style="left: 80%; animation-delay: 4.5s"
            ></div>
            <div
                class="floating-element"
                style="left: 90%; animation-delay: 1.5s"
            ></div>
        </div>

        <div class="container">
            <div class="theme-toggle" onclick="toggleTheme()">
                <span id="themeIcon">ğŸŒ™</span>
            </div>

            <div class="header">
                <h1>å­¸ç¿’å–®å­—ç”Ÿæˆå™¨</h1>
                <p>è¼¸å…¥æ‚¨çš„å­¸ç¿’æƒ…å¢ƒï¼Œç²å–å€‹äººåŒ–å–®å­—æ¨è–¦</p>
            </div>

            <form id="learningForm">
                <div class="form-group">
                    <label for="email" class="form-label">ğŸ“§ é›»å­éƒµä»¶</label>
                    <input
                        type="email"
                        id="email"
                        name="email"
                        class="form-input"
                        placeholder="è«‹è¼¸å…¥æ‚¨çš„é›»å­éƒµä»¶åœ°å€"
                        required
                    />
                </div>

                <div class="form-group">
                    <label for="situation" class="form-label"
                        >ğŸ“š å­¸ç¿’æƒ…å¢ƒ</label
                    >
                    <textarea
                        id="situation"
                        name="situation"
                        class="form-textarea"
                        placeholder="ä¾‹å¦‚ï¼šè«‹çµ¦æˆ‘å»é€›è¡—æœƒç”¨åˆ°çš„5å€‹å–®å­—"
                        required
                    ></textarea>

                    <div
                        class="tips-container"
                        id="usageTips"
                        style="
                            margin-top: 10px;
                            border-left-color: var(--warning-color);
                            background: rgba(236, 201, 75, 0.1);
                        "
                    >
                        <div
                            class="tips-title"
                            style="color: var(--warning-color)"
                        >
                            âš ï¸ ä½¿ç”¨å»ºè­°
                        </div>
                        <div
                            class="tips-content"
                            style="
                                color: var(--text-secondary);
                                font-size: 0.85rem;
                            "
                        >
                            å»ºè­°æ¯æ¬¡è«‹æ±‚çš„å–®å­—æ•¸é‡æ§åˆ¶åœ¨
                            <strong>5ï½10 å€‹</strong>
                            ä»¥å…§ï¼Œé¿å…ä¸€æ¬¡ç”Ÿæˆå¤ªå¤šå–®å­—ï¼Œä»¥å…å½±éŸ¿ AI
                            åˆ†æå“è³ªèˆ‡å­¸ç¿’æ•ˆæœã€‚
                        </div>
                    </div>
                </div>

                <button type="submit" class="submit-button">
                    <span class="loading-spinner" id="loadingSpinner"></span>
                    <span id="buttonText">ğŸš€ ç”Ÿæˆå­¸ç¿’å–®å­—</span>
                </button>
            </form>

            <div id="message" class="message"></div>

            <div id="progressContainer" class="progress-container">
                <div class="progress-text" id="progressText">
                    æ­£åœ¨è™•ç†æ‚¨çš„è«‹æ±‚...
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-steps">
                    <div class="progress-step active" id="step1">
                        <div class="step-icon">1</div>
                        <span>æ¥æ”¶è«‹æ±‚</span>
                    </div>
                    <div class="progress-step" id="step2">
                        <div class="step-icon">2</div>
                        <span>AI åˆ†æ</span>
                    </div>
                    <div class="progress-step" id="step3">
                        <div class="step-icon">3</div>
                        <span>ç”Ÿæˆå–®å­—</span>
                    </div>
                    <div class="progress-step" id="step4">
                        <div class="step-icon">4</div>
                        <span>ç™¼é€éƒµä»¶</span>
                    </div>
                </div>
                <div class="tips-container">
                    <div class="tips-title">ğŸ’¡ å°æç¤º</div>
                    <div class="tips-content" id="tipsContent">
                        æˆ‘å€‘çš„ AI
                        æ­£åœ¨ä»”ç´°åˆ†ææ‚¨çš„å­¸ç¿’æƒ…å¢ƒï¼Œç‚ºæ‚¨æŒ‘é¸æœ€åˆé©çš„å–®å­—...
                    </div>
                </div>
            </div>

            <div id="resultContainer" class="result-container">
                <div class="result-title" id="resultTitle">
                    âœ… å­¸ç¿’å–®å­—å·²ç”Ÿæˆï¼
                </div>
                <div class="result-content" id="resultContent">
                    æ‚¨çš„å­¸ç¿’å–®å­—å·²æˆåŠŸç”Ÿæˆä¸¦ç™¼é€åˆ°æ‚¨çš„ä¿¡ç®±ï¼Œè«‹æŸ¥æ”¶ï¼
                </div>
            </div>
        </div>

        <script>
            // ä¸»é¡Œåˆ‡æ›åŠŸèƒ½
            function toggleTheme() {
                const body = document.body;
                const themeIcon = document.getElementById('themeIcon');
                const currentTheme = body.getAttribute('data-theme');

                if (currentTheme === 'dark') {
                    body.removeAttribute('data-theme');
                    themeIcon.textContent = 'ğŸŒ™';
                    localStorage.setItem('theme', 'light');
                } else {
                    body.setAttribute('data-theme', 'dark');
                    themeIcon.textContent = 'â˜€ï¸';
                    localStorage.setItem('theme', 'dark');
                }
            }

            // åˆå§‹åŒ–ä¸»é¡Œ
            function initTheme() {
                const savedTheme = localStorage.getItem('theme');
                const themeIcon = document.getElementById('themeIcon');

                if (savedTheme === 'dark') {
                    document.body.setAttribute('data-theme', 'dark');
                    themeIcon.textContent = 'â˜€ï¸';
                } else {
                    themeIcon.textContent = 'ğŸŒ™';
                }
            }

            // Email è¨˜æ†¶åŠŸèƒ½
            function saveEmailToLocalStorage(email) {
                localStorage.setItem('userEmail', email);
            }

            function loadEmailFromLocalStorage() {
                return localStorage.getItem('userEmail');
            }

            // é€²åº¦æ¢æ§åˆ¶
            let progressInterval;
            let currentStep = 0;

            const progressSteps = [
                {
                    text: 'æ­£åœ¨æ¥æ”¶æ‚¨çš„è«‹æ±‚...',
                    tip: 'æˆ‘å€‘å·²æ”¶åˆ°æ‚¨çš„å­¸ç¿’éœ€æ±‚ï¼Œæ­£åœ¨å»ºç«‹é€£æ¥...',
                },
                {
                    text: 'AI æ­£åœ¨æ·±åº¦åˆ†ææ‚¨çš„æƒ…å¢ƒ...',
                    tip: 'æˆ‘å€‘çš„ AI æ­£åœ¨ç†è§£æ‚¨çš„å­¸ç¿’å ´æ™¯ï¼Œåˆ†ææœ€é©åˆçš„è©å½™é¡å‹...',
                },
                {
                    text: 'æ™ºæ…§ç”Ÿæˆå€‹äººåŒ–å–®å­—...',
                    tip: 'åŸºæ–¼æ‚¨çš„æƒ…å¢ƒï¼ŒAI æ­£åœ¨å¾è©åº«ä¸­æŒ‘é¸æœ€å¯¦ç”¨çš„å–®å­—...',
                },
                {
                    text: 'æº–å‚™ç™¼é€åˆ°æ‚¨çš„ä¿¡ç®±...',
                    tip: 'å–®å­—ç”Ÿæˆå®Œæˆï¼æ­£åœ¨æ•´ç†æ ¼å¼ä¸¦ç™¼é€åˆ°æ‚¨çš„é›»å­éƒµä»¶...',
                },
            ];

            function startProgress() {
                const progressContainer =
                    document.getElementById('progressContainer');
                const progressFill = document.getElementById('progressFill');
                const progressText = document.getElementById('progressText');
                const tipsContent = document.getElementById('tipsContent');
                const usageTips = document.getElementById('usageTips');

                // éš±è—ä½¿ç”¨æç¤º
                usageTips.style.display = 'none';

                progressContainer.style.display = 'block';
                currentStep = 0;

                // ç«‹å³é–‹å§‹ç¬¬ä¸€æ­¥
                updateProgressStep();

                // æ¯30ç§’æ›´æ–°ä¸€æ¬¡é€²åº¦
                progressInterval = setInterval(() => {
                    if (currentStep < progressSteps.length - 1) {
                        currentStep++;
                        updateProgressStep();
                    }
                }, 30000);
            }

            function updateProgressStep() {
                const progressFill = document.getElementById('progressFill');
                const progressText = document.getElementById('progressText');
                const tipsContent = document.getElementById('tipsContent');

                // æ›´æ–°é€²åº¦æ¢
                const progressPercent =
                    ((currentStep + 1) / progressSteps.length) * 100;
                progressFill.style.width = `${progressPercent}%`;

                // æ›´æ–°æ–‡å­—
                progressText.textContent = progressSteps[currentStep].text;
                tipsContent.textContent = progressSteps[currentStep].tip;

                // æ›´æ–°æ­¥é©ŸæŒ‡ç¤ºå™¨
                document
                    .querySelectorAll('.progress-step')
                    .forEach((step, index) => {
                        if (index <= currentStep) {
                            step.classList.add('active');
                        } else {
                            step.classList.remove('active');
                        }
                    });
            }

            function stopProgress() {
                if (progressInterval) {
                    clearInterval(progressInterval);
                    progressInterval = null;
                }
                document.getElementById('progressContainer').style.display =
                    'none';
            }

            // é¡¯ç¤ºçµæœ
            function showResult(success = true, message = '') {
                const resultContainer =
                    document.getElementById('resultContainer');
                const resultTitle = document.getElementById('resultTitle');
                const resultContent = document.getElementById('resultContent');
                const usageTips = document.getElementById('usageTips');

                if (success) {
                    resultTitle.style.display = 'block';
                    resultTitle.innerHTML = 'âœ… å­¸ç¿’å–®å­—å·²ç”Ÿæˆï¼';
                    resultContent.innerHTML =
                        message ||
                        'æ‚¨çš„å­¸ç¿’å–®å­—å·²æˆåŠŸç”Ÿæˆä¸¦ç™¼é€åˆ°æ‚¨çš„ä¿¡ç®±ï¼Œè«‹æŸ¥æ”¶ï¼';
                } else {
                    resultTitle.style.display = 'none';
                    resultContent.innerHTML = `<span style="color: var(--error-color)">${
                        message || 'ç”Ÿæˆéç¨‹ä¸­å‡ºç¾éŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚'
                    }</span>`;
                }

                resultContainer.style.display = 'block';
                usageTips.style.display = 'none';

                // æ·»åŠ æ–°è«‹æ±‚åŠŸèƒ½
                document.getElementById('newRequestButton').onclick =
                    function () {
                        resultContainer.style.display = 'none';
                        usageTips.style.display = 'block';
                        document.getElementById('situation').value = '';
                        document.getElementById('situation').focus();
                    };
            }

            // é¡¯ç¤ºè¨Šæ¯
            function showMessage(text, type) {
                const messageEl = document.getElementById('message');
                messageEl.textContent = text;
                messageEl.className = `message ${type}`;
                messageEl.style.display = 'block';

                // åªå°éŒ¯èª¤è¨Šæ¯è¨­ç½®è‡ªå‹•éš±è—
                if (type === 'error') {
                    setTimeout(() => {
                        messageEl.style.display = 'none';
                    }, 5000);
                }
            }

            // è¨­å®šè¼‰å…¥ç‹€æ…‹
            function setLoading(isLoading) {
                const submitButton = document.querySelector('.submit-button');
                const loadingSpinner =
                    document.getElementById('loadingSpinner');
                const buttonText = document.getElementById('buttonText');

                if (isLoading) {
                    submitButton.disabled = true;
                    loadingSpinner.style.display = 'inline-block';
                    buttonText.textContent = 'è™•ç†ä¸­...';
                } else {
                    submitButton.disabled = false;
                    loadingSpinner.style.display = 'none';
                    buttonText.textContent = 'ğŸš€ ç”Ÿæˆå­¸ç¿’å–®å­—';
                }
            }

            // è¡¨å–®æäº¤è™•ç†
            document
                .getElementById('learningForm')
                .addEventListener('submit', async function (e) {
                    e.preventDefault();

                    const email = document.getElementById('email').value.trim();
                    const situation = document
                        .getElementById('situation')
                        .value.trim();

                    // é©—è­‰è¼¸å…¥
                    if (!email || !situation) {
                        showMessage('è«‹å¡«å¯«æ‰€æœ‰å¿…å¡«æ¬„ä½', 'error');
                        return;
                    }

                    // é©—è­‰é›»å­éƒµä»¶æ ¼å¼
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!emailRegex.test(email)) {
                        showMessage('è«‹è¼¸å…¥æœ‰æ•ˆçš„é›»å­éƒµä»¶åœ°å€', 'error');
                        return;
                    }

                    // ä¿å­˜emailåˆ°localStorage
                    saveEmailToLocalStorage(email);

                    setLoading(true);
                    startProgress();

                    try {
                        const response = await fetch(
                            'https://learning-words.onrender.com/generateWord',
                            {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                    Accept: 'application/json',
                                },
                                mode: 'cors', // æ˜ç¢ºè¨­å®š CORS æ¨¡å¼
                                credentials: 'omit', // ä¸ç™¼é€èªè­‰è³‡è¨Š
                                body: JSON.stringify({
                                    des: situation,
                                    user_email: email,
                                }),
                            }
                        );

                        if (response.ok) {
                            // å®Œæˆæ‰€æœ‰æ­¥é©Ÿ
                            currentStep = progressSteps.length - 1;
                            updateProgressStep();

                            setTimeout(() => {
                                stopProgress();
                                showResult(
                                    true,
                                    'âœ… å¤ªæ£’äº†ï¼å­¸ç¿’å–®å­—å·²æˆåŠŸç”Ÿæˆä¸¦ç™¼é€åˆ°æ‚¨çš„ä¿¡ç®±ï¼Œè«‹æŸ¥æ”¶ï¼'
                                );
                                document.getElementById('situation').value = '';
                            }, 2000);
                        } else {
                            stopProgress();
                            const errorData = await response
                                .json()
                                .catch(() => ({}));
                            showResult(
                                false,
                                `âŒ è«‹æ±‚å¤±æ•—ï¼š${
                                    errorData.message ||
                                    'ä¼ºæœå™¨éŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦'
                                }`
                            );
                        }
                    } catch (error) {
                        stopProgress();
                        console.error('Error:', error);

                        if (
                            error.name === 'TypeError' &&
                            error.message.includes('fetch')
                        ) {
                            showResult(
                                false,
                                'âŒ é€£æ¥å¤±æ•—ï¼šå¯èƒ½æ˜¯è·¨åŸŸå•é¡Œæˆ–ç¶²è·¯ä¸ç©©å®šã€‚æ‚¨å¯ä»¥å˜—è©¦ï¼š\n1. é‡æ–°æ•´ç†é é¢å¾Œå†è©¦\n2. æª¢æŸ¥ç¶²è·¯é€£æ¥\n3. ç¨å¾Œå†è©¦'
                            );
                        } else {
                            showResult(
                                false,
                                'âŒ ç¶²è·¯é€£æ¥éŒ¯èª¤ï¼Œè«‹æª¢æŸ¥æ‚¨çš„ç¶²è·¯é€£æ¥å¾Œé‡è©¦'
                            );
                        }
                    } finally {
                        setLoading(false);
                    }
                });

            // å‹•æ…‹èª¿æ•´æµ®å‹•å…ƒç´ ä½ç½®
            function randomizeFloatingElements() {
                const elements = document.querySelectorAll('.floating-element');
                elements.forEach((element) => {
                    const randomTop = Math.random() * 100;
                    const randomDelay = Math.random() * 6;
                    element.style.top = `${randomTop}%`;
                    element.style.animationDelay = `${randomDelay}s`;
                });
            }

            // é é¢è¼‰å…¥å®Œæˆå¾Œåˆå§‹åŒ–
            document.addEventListener('DOMContentLoaded', function () {
                initTheme();
                randomizeFloatingElements();

                // è¼‰å…¥ä¿å­˜çš„email
                const savedEmail = loadEmailFromLocalStorage();
                if (savedEmail) {
                    document.getElementById('email').value = savedEmail;
                }

                // æ¯30ç§’é‡æ–°éš¨æ©ŸåŒ–æµ®å‹•å…ƒç´ 
                setInterval(randomizeFloatingElements, 30000);

                // ç¢ºä¿çµæœå®¹å™¨æ˜¯éš±è—çš„ï¼Œæç¤ºæ˜¯é¡¯ç¤ºçš„
                document.getElementById('resultContainer').style.display =
                    'none';
                document.getElementById('usageTips').style.display = 'block';
            });
        </script>
    </body>
</html>
